SCRIPT_START
{
NOP
WAIT 0

LVAR_INT scplayer tblip enem[6] wpick i andar1
LVAR_FLOAT x y z
GET_PLAYER_CHAR 0 scplayer

main_loop:
IF LOCATE_CHAR_ANY_MEANS_2D scplayer 2488.562 -1666.865 5.0 5.0 1
    GOTO cutscene1
ENDIF
GOTO main_loop

cutscene1:
DO_FADE 2000 0
LOAD_SCENE -6145.6128, -2817.6257, 25.1926
SET_PLAYER_CONTROL 0 FALSE
DISPLAY_HUD 0
DISPLAY_RADAR 0
SET_FIXED_CAMERA_POSITION -6144.8662, -2818.2834, 25.4476 0.0 0.0 0.0
POINT_CAMERA_AT_POINT -6145.6128, -2817.6257, 25.1926 2
CLEAR_HELP
WAIT 4000
DO_FADE 2000 1
PRINT_STRING_NOW "Your first mission as a mercenary in San Andreas:" 5000
WAIT 5000
PRINT_STRING_NOW "Dominate this artificial island!" 5000
WAIT 5000

aviao:
DO_FADE 1000 0
    WAIT 2000
    //SET_AREA_VISIBLE 9
    SET_CHAR_AREA_VISIBLE scplayer 9
    LOAD_SCENE -6555.7251 -2599.7314 995.7842
    SET_CHAR_COORDINATES scplayer -6555.7251 -2599.7314 995.7842
    SET_FIXED_CAMERA_POSITION -6552.6548, -2601.7776, 996.5732 0.0 0.0 0.0
    POINT_CAMERA_AT_POINT -6553.5361, -2601.3079, 996.4183 2
    REQUEST_MODEL 46        //parachute
    REQUEST_MODEL 358       //SNIPER
    REQUEST_MODEL 355       //AK
    REQUEST_MODEL 347       //silenced
    REQUEST_MODEL 335       //FACA
    LOAD_ALL_MODELS_NOW
    GIVE_WEAPON_TO_CHAR scplayer WEAPONTYPE_PARACHUTE 1   //paraquedas
    GIVE_WEAPON_TO_CHAR scplayer WEAPONTYPE_PISTOL_SILENCED 100
    GIVE_WEAPON_TO_CHAR scplayer WEAPONTYPE_SNIPERRIFLE 40
    GIVE_WEAPON_TO_CHAR scplayer WEAPONTYPE_KNIFE 1
    SET_CURRENT_CHAR_WEAPON scplayer 0
    SET_PLAYER_CONTROL 0 TRUE
    RESTORE_CAMERA_JUMPCUT
    DISPLAY_HUD 1
    DISPLAY_RADAR 1
DO_FADE 1000 1

waiting_jump:
WAIT 0
GET_CHAR_COORDINATES scplayer x y z

IF z < 882.0000
    SET_AREA_VISIBLE 0
    SET_CHAR_AREA_VISIBLE scplayer 0
    ADD_SPRITE_BLIP_FOR_COORD -6374.8394, -2686.3398, 6.1074 13 tblip
    GOTO jumped
ENDIF

GOTO waiting_jump

jumped:
WAIT 0
IF LOCATE_CHAR_ANY_MEANS_3D scplayer -6364.7793, -2706.0269, 1.6384 (15.0 15.0 10.0) TRUE
    GOTO pousou
    REMOVE_BLIP tblip
    WHILE LOCATE_CHAR_ANY_MEANS_3D scplayer -6374.8394, -2686.3398, 6.1074 (5.0 5.0 3.0) TRUE
        WAIT 0
    ENDWHILE
ENDIF
GOTO jumped

pousou:
WAIT 0
DO_FADE 1000 0
REQUEST_MODEL 14200  //YAKUZA1
REQUEST_MODEL 14201
REQUEST_MODEL 14202
LOAD_ALL_MODELS_NOW
CREATE_CHAR PEDTYPE_GANG9 14200 -6315.9741 -2720.6428 4.3061 enem[0]
GOSUB spawn_enems
WAIT 2000
DO_FADE 1000 1
TASK_GO_STRAIGHT_TO_COORD enem[0] -6316.3296, -2724.1802, 4.1047 4 30000
SET_FIXED_CAMERA_POSITION -6305.0649, -2743.8013, 4.5966 0.0 0.0 0.0
POINT_CAMERA_AT_POINT -6305.5811, -2742.9502, 4.5565 2

PRINT_STRING_NOW "Someone is coming,be careful!" 3000
WAIT 3000
RESTORE_CAMERA_JUMPCUT 

chwalk:
WAIT 0
OPEN_SEQUENCE_TASK andar1
    TASK_GO_STRAIGHT_TO_COORD -1 -6329.6021, -2720.6094, 4.1047 4 30000
    TASK_GO_STRAIGHT_TO_COORD -1 -6332.3242, -2702.5005, 4.1047 4 30000
    IF HAS_CHAR_SPOTTED_CHAR_IN_FRONT enem[i] scplayer
        TASK_SHOOT_AT_CHAR enem[i] scplayer -2
    ENDIF
    IF IS_CHAR_DEAD enem[0]
        TASK_DEAD -1
        PLAY_MISSION_PASSED_TUNE 1
        PRINT_STRING_NOW "THANK YOU FOR TESTING THIS!" 5000
    GOTO end
ENDIF 
CLOSE_SEQUENCE_TASK andar1
PERFORM_SEQUENCE_TASK enem[0] andar1
CLEAR_SEQUENCE_TASK andar1

IF HAS_CHAR_SPOTTED_CHAR_IN_FRONT enem[0] scplayer
    TASK_SHOOT_AT_CHAR enem[0] scplayer -2
    //TASK_KILL_CHAR_ON_FOOT_TIMED enem[n] scplayer 500000
ENDIF
GOTO chwalk

spawn_enems:
CREATE_CHAR PEDTYPE_GANG9 14201 -6326.1016, -2720.6433, 4.1138 enem[1]
SET_CHAR_HEADING enem[1] 187.0
GIVE_WEAPON_TO_CHAR enem[i] WEAPONTYPE_AK47 10000
SET_CHAR_DROPS_WEAPONS_WHEN_DEAD enem[i] 1
SET_CHAR_ACCURACY enem[i] 45
SET_CHAR_HEALTH enem[i] 150
RETURN

end:
}
SCRIPT_END